/*!
 * jQuery.ellipsis
 * http://github.com/jjenzz/jquery.ellipsis
 * --------------------------------------------------------------------------
 * Copyright (c) 2013 J. Smith (@jjenzz)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * adds a class to the last 'allowed' line of text so you can apply
 * text-overflow: ellipsis;
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e="ellipsis",n='<span style="white-space: nowrap;">',s={lines:"auto",ellipClass:"ellip",responsive:!1};function i(i,l){var o,p,a,r,u,c,f,h,x=this,m=0,v=[];function C(){if("number"==typeof x.opts.lines&&x.opts.lines<2){x.$el.addClass(x.opts.ellipLineClass);return}if(c=x.$cont.height(),!("auto"===x.opts.lines&&x.$el.prop("scrollHeight")<=c)&&o){var e;f=t.trim(_(x.text)).split(/\s+/),x.$el.html(n+f.join("</span> "+n)+"</span>"),x.$el.find("span").each(o),null!=p&&(e=p,f[e]='<span class="'+x.opts.ellipLineClass+'">'+f[e],f.push("</span>"),x.$el.html(f.join(" ")))}}function _(t){return String(t).replace(/[&<>"'``\/]/g,function(t){return h[t]})}if(h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","/":"&#x2F;","\\":"&#x5C;"},x.$cont=t(i),x.opts=t.extend({},s,l),"auto"===x.opts.lines&&(o=function(e,n){var s=t(n),i=s.position().top;if(u=u||s.height(),i===r?v[m].push(s):(r=i,v[m+=1]=[s]),i+u>c)return p=e-v[m-1].length,!1}),"number"==typeof x.opts.lines&&x.opts.lines>1&&(o=function(e,n){var s=t(n).position().top;if(s!==r&&(r=s,m+=1),m===x.opts.lines)return p=e,!1}),x.opts.responsive){var d=function(){v=[],m=0,r=null,p=null,x.$el.html(_(x.text)),clearTimeout(a),a=setTimeout(C,100)};t(window).on("resize."+e,d)}x.text=x.$cont.text(),x.opts.ellipLineClass=x.opts.ellipClass+"-line",x.$el=t('<span class="'+x.opts.ellipClass+'" />'),x.$el.text(x.text),x.$cont.empty().append(x.$el),C()}t.fn[e]=function(n){return this.each(function(){try{t(this).data(e,new i(this,n))}catch(s){window.console&&console.error(e+": "+s)}})}});